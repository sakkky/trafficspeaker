<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>首都圏リアルタイム渋滞マップ（音声案内つき）</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin:0; font-family:sans-serif; }
  #map { height: 70vh; }
  #controls { padding: 12px; }
  button { font-size:18px; padding:10px 15px; }
</style>
</head>
<body>

<div id="map"></div>
<div id="controls">
  <button id="readBtn">▶ 渋滞を読み上げ</button>
</div>

<script>
function initMap() {
  const map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 35.68, lng: 139.76 },
    zoom: 12,
  });

  // ◆ 渋滞レイヤー（Google が自動更新）
  const trafficLayer = new google.maps.TrafficLayer();
  trafficLayer.setMap(map);

  document.getElementById("readBtn").onclick = () => {
    const msg = new SpeechSynthesisUtterance(
      "現在の渋滞状況は地図上にリアルタイムで表示されています。" +
      "赤い線は渋滞、黄色は混雑を表します。安全運転でお出かけください。"
    );
    msg.lang = "ja-JP";
    speechSynthesis.speak(msg);
  };
}
</script>

<script async
  src="https://maps.googleapis.com/maps/api/js?callback=initMap">
</script>

</body>
</html>